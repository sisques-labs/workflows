<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reusable GitHub Workflows | Sisques Labs</title>
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22 text-anchor=%22middle%22 x=%2250%22>‚öôÔ∏è</text></svg>"
    />
    <link rel="stylesheet" href="styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css"
    />
  </head>
  <body>
    <nav class="navbar">
      <div class="container">
        <div class="nav-content">
          <a href="#home" class="logo">Workflows</a>
          <div class="nav-links">
            <a href="#workflows">Workflows</a>
            <a href="#actions">Actions</a>
            <a href="#examples">Examples</a>
            <a
              href="https://github.com/sisques-labs/workflows"
              target="_blank"
              class="github-link"
            >
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="currentColor"
              >
                <path
                  d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"
                />
              </svg>
              GitHub
            </a>
          </div>
        </div>
      </div>
    </nav>

    <main>
      <section id="home" class="hero">
        <div class="container">
          <h1>Reusable GitHub Workflows</h1>
          <p class="subtitle">
            Centralized CI/CD workflows and composite actions for your projects
          </p>
          <div class="hero-buttons">
            <a href="#workflows" class="btn btn-primary">Get Started</a>
            <a
              href="https://github.com/sisques-labs/workflows"
              target="_blank"
              class="btn btn-secondary"
              >View on GitHub</a
            >
          </div>
        </div>
      </section>

      <section id="overview" class="overview">
        <div class="container">
          <h2>What is this?</h2>
          <p class="lead">
            This repository contains reusable GitHub Actions workflows and
            composite actions that can be used across multiple projects to
            centralize and standardize your CI/CD logic.
          </p>

          <div class="structure">
            <h3>Repository Structure</h3>
            <pre><code class="language-bash">.github/
‚îú‚îÄ‚îÄ workflows/          # Reusable workflows
‚îÇ   ‚îú‚îÄ‚îÄ web-build.yml   # Web application build workflow
‚îÇ   ‚îú‚îÄ‚îÄ api-build.yml   # API build workflow
‚îÇ   ‚îî‚îÄ‚îÄ node-release.yml # Node.js release workflow
‚îî‚îÄ‚îÄ actions/            # Composite actions
    ‚îú‚îÄ‚îÄ setup/          # Common setup (Node.js, pnpm, checkout)
    ‚îî‚îÄ‚îÄ install/        # Install dependencies with pnpm</code></pre>
          </div>
        </div>
      </section>

      <section id="workflows" class="workflows">
        <div class="container">
          <h2>Reusable Workflows</h2>
          <p class="section-description">
            Pre-built workflows for common CI/CD tasks
          </p>

          <div class="workflow-grid">
            <div class="workflow-card">
              <div class="workflow-icon">üåê</div>
              <h3>Web Build</h3>
              <p>
                Builds a Next.js or web application with optional linting and
                testing.
              </p>
              <a href="#web-build-details" class="workflow-link"
                >View Details ‚Üí</a
              >
            </div>
            <div class="workflow-card">
              <div class="workflow-icon">üöÄ</div>
              <h3>API Build</h3>
              <p>
                Builds a NestJS or API application with optional linting and
                testing.
              </p>
              <a href="#api-build-details" class="workflow-link"
                >View Details ‚Üí</a
              >
            </div>
            <div class="workflow-card">
              <div class="workflow-icon">üì¶</div>
              <h3>Node Release</h3>
              <p>
                Automatically releases Node.js packages using semantic-release.
                Updates version in package.json and creates GitHub releases.
              </p>
              <a href="#node-release-details" class="workflow-link"
                >View Details ‚Üí</a
              >
            </div>
          </div>
        </div>
      </section>

      <section id="workflow-details" class="workflow-details">
        <div class="container">
          <div id="web-build-details" class="detail-section">
            <h3>Web Build</h3>
            <p>
              Builds a Next.js or web application with optional linting and
              testing. This workflow uses the composite actions for setup and
              dependency installation.
            </p>
            <pre><code class="language-yaml">name: Web Build

on:
  pull_request:
    paths:
      - 'apps/web/**'
    branches: [main, dev]

jobs:
  build:
    uses: sisques-labs/workflows/.github/workflows/web-build.yml@main
    with:
      app_path: "apps/web"
      app_name: "Web App"
      node_version: "24"
      run_lint: true
      run_test: true
      build_command: "build"</code></pre>
            <h4>Inputs</h4>
            <ul class="inputs-list">
              <li>
                <code>app_path</code> (required): Path to the web app (e.g.,
                <code>apps/web</code>)
              </li>
              <li>
                <code>app_name</code> (optional, default:
                <code>"Web App"</code>): Name of the app for display
              </li>
              <li>
                <code>node_version</code> (optional, default:
                <code>"24"</code>): Node.js version to use
              </li>
              <li>
                <code>run_lint</code> (optional, default: <code>true</code>):
                Whether to run lint
              </li>
              <li>
                <code>run_test</code> (optional, default: <code>true</code>):
                Whether to run tests
              </li>
              <li>
                <code>build_command</code> (optional, default:
                <code>"build"</code>): Build command to run (e.g.,
                <code>build</code>, <code>build:prod</code>)
              </li>
            </ul>
          </div>
          <div id="api-build-details" class="detail-section">
            <h3>API Build</h3>
            <p>
              Builds a NestJS or API application with optional linting and
              testing. This workflow uses the composite actions for setup and
              dependency installation.
            </p>
            <pre><code class="language-yaml">name: API Build

on:
  pull_request:
    paths:
      - 'apps/api/**'
    branches: [main, dev]

jobs:
  build:
    uses: sisques-labs/workflows/.github/workflows/api-build.yml@main
    with:
      app_path: "apps/api"
      app_name: "API"
      node_version: "24"
      run_lint: true
      run_test: true
      build_command: "build"</code></pre>
            <h4>Inputs</h4>
            <ul class="inputs-list">
              <li>
                <code>app_path</code> (required): Path to the API app (e.g.,
                <code>apps/api</code>)
              </li>
              <li>
                <code>app_name</code> (optional, default:
                <code>"API"</code>): Name of the app for display
              </li>
              <li>
                <code>node_version</code> (optional, default:
                <code>"24"</code>): Node.js version to use
              </li>
              <li>
                <code>run_lint</code> (optional, default: <code>true</code>):
                Whether to run lint
              </li>
              <li>
                <code>run_test</code> (optional, default: <code>true</code>):
                Whether to run tests
              </li>
              <li>
                <code>build_command</code> (optional, default:
                <code>"build"</code>): Build command to run (e.g.,
                <code>build</code>, <code>build:prod</code>)
              </li>
            </ul>
          </div>
          <div id="node-release-details" class="detail-section">
            <h3>Node Release</h3>
            <p>
              Automatically releases a Node.js package using semantic-release.
              Updates the version in <code>package.json</code>, creates Git tags,
              generates GitHub releases, and creates changelogs automatically
              based on conventional commits.
            </p>
            <pre><code class="language-yaml">name: Release

on:
  push:
    branches:
      - main

jobs:
  release:
    uses: sisques-labs/workflows/.github/workflows/node-release.yml@main
    secrets: inherit
    with:
      app_path: "packages/sdk"
      build_command: "build"
      use_filter: true</code></pre>
            <h4>Inputs</h4>
            <ul class="inputs-list">
              <li>
                <code>app_path</code> (optional, default: <code>"."</code>):
                Path to the app/package (e.g., <code>packages/sdk</code>,
                <code>apps/api</code>). Use <code>"."</code> for root
              </li>
              <li>
                <code>working_directory</code> (optional): Working directory
                for semantic-release (defaults to <code>app_path</code>)
              </li>
              <li>
                <code>node_version</code> (optional, default: <code>"24"</code>):
                Node.js version to use
              </li>
              <li>
                <code>pnpm_version</code> (optional, default: <code>""</code>):
                pnpm version to use. If empty, will auto-detect from
                <code>package.json</code>
              </li>
              <li>
                <code>use_filter</code> (optional, default: <code>false</code>):
                Whether to use filter when installing dependencies
              </li>
              <li>
                <code>build_command</code> (optional): Build command to run
                before release (e.g., <code>build</code>, <code>build:prod</code>)
              </li>
              <li>
                <code>release_command</code> (optional): Custom release command.
                Defaults to <code>pnpm release</code> if found in package.json,
                otherwise uses <code>npx semantic-release</code>
              </li>
            </ul>
            <h4>Requirements</h4>
            <ul class="inputs-list">
              <li>
                Your project must have <code>semantic-release</code> configured.
                You can either:
                <ul>
                  <li>
                    Add a <code>release</code> script to your
                    <code>package.json</code>: <code>"release": "semantic-release"</code>
                  </li>
                  <li>
                    Or install <code>semantic-release</code> as a dependency (the
                    workflow will use <code>npx semantic-release</code>)
                  </li>
                </ul>
              </li>
              <li>
                The workflow requires <code>GITHUB_TOKEN</code> (automatically
                provided) and optionally <code>NPM_TOKEN</code> if publishing
                to npm
              </li>
              <li>
                Ensure your commits follow
                <a
                  href="https://www.conventionalcommits.org/"
                  target="_blank"
                  >Conventional Commits</a
                >
                format for automatic versioning
              </li>
            </ul>
          </div>
        </div>
      </section>

      <section id="actions" class="actions">
        <div class="container">
          <h2>Composite Actions</h2>
          <p class="section-description">
            Reusable action components for common setup tasks
          </p>

          <div class="action-grid">
            <div class="action-card">
              <h3>Setup</h3>
              <p>
                Common setup action for repository checkout, Node.js, and pnpm
                installation.
              </p>
              <pre><code class="language-yaml"># Auto-detect pnpm version from package.json (recommended)
- name: Setup
  uses: sisques-labs/workflows/.github/actions/setup@main
  with:
    node_version: "24"

# Or specify pnpm version explicitly
- name: Setup
  uses: sisques-labs/workflows/.github/actions/setup@main
  with:
    node_version: "24"
    pnpm_version: "9.0.0"</code></pre>
              <h4>Inputs</h4>
              <ul class="inputs-list">
                <li>
                  <code>node_version</code> (optional, default:
                  <code>"24"</code>): Node.js version to use
                </li>
                <li>
                  <code>pnpm_version</code> (optional, default:
                  <code>""</code>): pnpm version to use. If empty, will auto-detect from <code>package.json</code> <code>packageManager</code> field
                </li>
              </ul>
            </div>

            <div class="action-card">
              <h3>Install</h3>
              <p>
                Install dependencies using pnpm with optional filter and frozen
                lockfile handling. Automatically handles dependabot by skipping
                frozen lockfile when needed.
              </p>
              <pre><code class="language-yaml">- name: Install dependencies
  uses: sisques-labs/workflows/.github/actions/install@main
  with:
    app_path: "apps/web"
    use_filter: "true"
    frozen_lockfile: "true"</code></pre>
              <h4>Inputs</h4>
              <ul class="inputs-list">
                <li>
                  <code>app_path</code> (optional, default: <code>"."</code>):
                  Path to the app/package (e.g., <code>apps/web</code>). Use
                  <code>"."</code> for root
                </li>
                <li>
                  <code>use_filter</code> (optional, default:
                  <code>"false"</code>): Whether to use filter when installing
                  (only install dependencies for app_path)
                </li>
                <li>
                  <code>frozen_lockfile</code> (optional, default:
                  <code>"true"</code>): Whether to use --frozen-lockfile
                  (automatically skipped for dependabot)
                </li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <section id="examples" class="examples">
        <div class="container">
          <h2>Complete CI Pipeline Example</h2>
          <p class="section-description">
            Example of using both Web Build and API Build workflows in your project
          </p>
          <pre><code class="language-yaml">name: CI

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

jobs:
  build-web:
    uses: sisques-labs/workflows/.github/workflows/web-build.yml@main
    with:
      app_path: "apps/web"
      app_name: "Web App"
      node_version: "24"
      run_lint: true
      run_test: true
      build_command: "build"

  build-api:
    uses: sisques-labs/workflows/.github/workflows/api-build.yml@main
    with:
      app_path: "apps/api"
      app_name: "API"
      node_version: "24"
      run_lint: true
      run_test: true
      build_command: "build"

  release:
    if: github.ref == 'refs/heads/main' && github.event_name == 'push'
    needs: [build-web, build-api]
    uses: sisques-labs/workflows/.github/workflows/node-release.yml@main
    secrets: inherit
    with:
      app_path: "."
      build_command: "build"</code></pre>
        </div>
      </section>

      <section id="best-practices" class="best-practices">
        <div class="container">
          <h2>Best Practices</h2>
          <ul class="practices-list">
            <li>
              <strong>Always use <code>secrets: inherit</code></strong> when
              calling workflows that require secrets
            </li>
            <li>
              <strong>Use consistent Node.js versions</strong> across your
              project (default is <code>24</code>)
            </li>
            <li>
              <strong>Use install_filter</strong> when you only need
              dependencies for a specific app/package
            </li>
            <li>
              <strong>Combine workflows</strong> in your project's workflow
              files for complete CI/CD pipelines
            </li>
          </ul>
        </div>
      </section>
    </main>

    <footer class="footer">
      <div class="container">
        <p>
          &copy; 2024 Sisques Labs. Open source and available under the MIT
          License.
        </p>
      </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="script.js"></script>
  </body>
</html>
